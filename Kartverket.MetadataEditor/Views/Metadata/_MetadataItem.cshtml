@using Kartverket.MetadataEditor.Helpers
@model Kartverket.MetadataEditor.Models.MetadataItemViewModel

@{
    string css = "";
    string relationIcon = "";
    if (ViewData.ContainsKey("Relation"))
    {
        css = "relation";
        relationIcon = "<span class=\"relation-icon\"><img src=\"" + Url.Content("~/Content/arrow-down-right.png") + "\" width=\"9\" height=\"17\" alt=\"pil ned og til høyre.\"></span>";
    }
}
<script>validationUUIDs[validationUUIDs.length] = '@Model.Uuid';</script>

<div class="row">
    <div class="col-md-5">
        <div class="row">
            <div class="col-md-6 metadata-list-item-mobile-row metadata-list-item-title">
                @Html.Raw(relationIcon)
                <a href="@Url.Action("Edit", new { uuid=@Model.Uuid })" data-loading-message="Henter innhold" class="show-loading-animation">
                    @Model.Title
                </a>
                @if (!string.IsNullOrWhiteSpace(Model.Relation) && Model.Type == "service")
                {
                    <p class="no-margin-bottom"><small>[<a href="@Url.Action("Edit", new { uuid = @Model.Relation})">Lenke til tjenesten</a>]</small></p>
                }
            </div>
            <div class="col-md-6 metadata-list-item-mobile-row">
                <div class="visible-sm-inline-block visible-xs-inline-block"><label>@Resources.UI.Metadata_Organization</label></div>
                @Model.Organization
            </div>
        </div>
    </div>
    <div class="col-md-7">
        <div class="row">
            <div class="col-md-2 metadata-list-item-mobile-row">
                <div class="visible-sm-inline-block visible-xs-inline-block">
                    <label>@Resources.UI.Metadata_Type</label>
                </div>
                <div id="type-@Model.Uuid" class="label @Model.GetInnholdstypeCSS()">@Model.GetInnholdstype()</div>
            </div>
            <div class="col-md-2 metadata-list-item-mobile-row">
                <div class="visible-sm-inline-block visible-xs-inline-block">
                    @if (System.Web.Configuration.WebConfigurationManager.AppSettings["ValideringUrl"] != "")
                    {
                        <label>@Resources.UI.Metadata_Status</label>
                    }
                </div>
                <span id="status-@Model.Uuid"></span>
            </div>
            <div class="col-md-8 metadata-list-item-mobile-row">

                <a href="@Model.GeoNetworkXmlDownloadUrl" target="_blank" class="btn btn-xs">
                    <i class="glyphicon glyphicon-file"></i> Last ned XML
                </a>
                <a href="@Html.KartkatalogUrl()@Model.MetadataViewParameters()" target="_blank" class="btn btn-xs">
                    <span class="glyphicon glyphicon-share-alt"></span> Vis i katalog
                </a>


                <a href="@Url.Action("ConfirmDelete", "Metadata", new { uuid = Model.Uuid })" class="btn btn-xs"><span class="glyphicon glyphicon-trash"></span> Slett</a>

            </div>
        </div>
    </div>
</div>

@if (Model.Type == "service" && !string.IsNullOrWhiteSpace(Model.Relation))
{
    <script>getAdditionalData('@Model.Uuid')</script>
}