<script type="text/x-template" id="multilingual-keywords-template">
    <div>

        <div class="panel panel-default">
            <div class="panel-heading">
                <div class="row">
                    <div class="col-md-11">
                        <span>{{ section.title }}</span>
                    </div>
                    <div class="col-md-1">
                        <span v-on:click="section.helpText.active = !section.helpText.active" v-bind:class="{active: section.helpText.active}" class="badge help-text-toggle">?</span>
                    </div>
                    <div class="clearfix"></div>
                </div>
            </div>
            <div class="panel-body">
                <p v-if="section.helpText && section.helpText.active" class="help-text bg-success" v-html="section.helpText.content"></p>
                <div v-if="$store.getters['Keywords' + this.section.name].length">
                    <div class="form-element-tab-group">
                        <span v-on:click="selectedLanguage = languageCode"
                              v-for="(language, languageCode) in $root.languages"
                              v-bind:class="{active: selectedLanguage == languageCode}"
                              class="form-element-tab">
                            {{ $root.languages[languageCode] }}
                        </span>
                    </div>
                    <div v-bind:class="{'striped-list': selectedLanguage == 'all'}">
                        <div is="multilingual-keyword"
                             v-bind:class="{'list-item': selectedLanguage == 'all'}"
                             v-bind:selected-language="selectedLanguage"
                             v-bind:keyword-name="section.name"
                             v-bind:inputType="section.type"
                             v-bind:keyword-index="index"
                             v-bind:keyword-value="keyword"
                             v-bind:options="section.options !== undefined ? section.options : null"
                             v-for="(keyword, index) in keywords">
                        </div>
                    </div>
                </div>
                <div v-else>
                    Ingen nøkkelord er lagt til for denne kategorien
                </div>

                <div class="text-right">
                    <span v-on:click="$store.dispatch('addMultilingualKeyword', {keywordName: section.name})" class="btn">Legg til nøkkelord</span>
                </div>
            </div>
        </div>

    </div>
</script>

<script>
    var MultilingualKeywords = {
        name: "multilingualKeywords",
        template: "#multilingual-keywords-template",
        props: ["section"],
        components: {
            MultilingualKeyword: MultilingualKeyword
        },
        data: function () {
            return {
                arrayName: 'Keywords' + this.section.name,
                selectedLanguage: this.$root.defaultLanguage
            }
        },
        computed: {
            keywords: function () {
                return this.$store.getters['Keywords' + this.section.name];
            }
        }
        
    };
</script>


