@model Kartverket.MetadataEditor.Models.ServiceLayerViewModel

<h4>Tjeneste:</h4>
<h1>@Model.Metadata.Title</h1>

<form action="@Url.Action("Index")" method="get" class="form-horizontal">
    <input type="hidden" name="uuid" value="@Model.Metadata.Uuid" />
    <div class="form-group">
        <label for="urlWms" class="col-sm-3 control-label">URL til WMS-tjenesten:</label>
        <div class="col-sm-6">
            <input type="text" value="@Model.WmsUrl" name="wmsUrl" class="form-control" /> 
        </div>
        <div class="col-sm-2">
            <button class="btn btn-primary">Hent laginformasjon</button>
        </div>
    </div>
    <h3>Nøkkelord på tjeneste</h3>
    <p>Sjekk at nøkkelordene på tjenesten er tilfredstillende <i>før</i> du oppretter metadata for lagene. Alle nøkkelord fra tjenesten blir kopiert ned på lagnivå.</p>
    
    <div class="row">
        <div class="col-sm-6 col-md-4">
            <p class="keyword-header">Tema</p>
            <ul>
                @foreach (var k in Model.Metadata.KeywordsTheme)
                {
                    <li>@k</li>
                }
            </ul>
        </div>
        <div class="col-sm-6 col-md-4">
            <p class="keyword-header">Nasjonale intiativ</p>
            <ul>
                @foreach (var k in Model.Metadata.KeywordsNationalInitiative)
                {
                    <li>@k</li>
                }
            </ul>
        </div>
        <div class="col-sm-6 col-md-4">
            <p class="keyword-header">Inspire</p>
            <ul>
                @foreach (var k in Model.Metadata.KeywordsInspire)
                {
                    <li>@k</li>
                }
            </ul>
        </div>

        <div class="col-sm-6 col-md-4">
            <p class="keyword-header">Sted</p>
            <ul>
                @foreach (var k in Model.Metadata.KeywordsPlace)
                {
                    <li>@k</li>
                }
            </ul>
        </div>
        <div class="col-sm-6 col-md-4">
            <p class="keyword-header">Annet</p>
            <ul>
                @foreach (var k in Model.Metadata.KeywordsOther)
                {
                    <li>@k</li>
                }
            </ul>
        </div>
    </div>
</form>

<hr/>

<h4>Informasjon om lagene fra GetCapabilities</h4>
<form method="post" action="@Url.Action("CreateMetadataForLayers")">

    <input type="hidden" name="uuid" value="@Model.Metadata.Uuid" />
    <input type="hidden" name="wmsUrl" value="@Model.WmsUrl" />

    @foreach (var layer in Model.Layers)
    {
        <div class="panel panel-default wms-layer">
            <div class="panel-heading">
                @layer.Title <span class="layer-name" style="display:none">[@layer.Name]</span>
                <div class="pull-right">
                    <label><input type="checkbox" name="selectedLayers" value="@layer.Name" checked="checked" /> Opprett metadata</label>
                </div>
            </div>
            <div class="panel-body">
                <p><strong>WMS lagnavn:</strong> @layer.Name</p>
                <p><strong>Sammendrag:</strong> @layer.Abstract</p>
                <p>
                    <strong>Nøkkelord:</strong>
                    <ul>
                        @foreach (var keyword in layer.Keywords)
                        {
                            <li>@keyword</li>
                        }
                    </ul>
                </p>
                <p><strong>Engelsk tittel:</strong> @layer.EnglishTitle</p>
                <p><strong>Engelsk sammendrag:</strong> @layer.EnglishAbstract</p>
                <p><strong>Geografisk utstrekning:</strong> Nord: @layer.BoundingBoxNorth, Sør: @layer.BoundingBoxSouth, Øst: @layer.BoundingBoxEast, Vest: @layer.BoundingBoxWest</p>
            </div>
        </div>
    }
    <div class="btn-toolbar">
        <div class="btn-group">
            <button id="toggleSelectedWmsLayers" class="btn btn-default">Velg alle/ingen</button>
        </div>
        <div class="btn-group">
            <button id="toggleWmsLayerDetails" class="btn btn-default">Vis/skjul laginformasjon</button>
        </div>
        <div class="btn-group">
            <button type="submit" class="btn btn-primary">Opprett metadata for valgte lag</button>
        </div>
    </div>
    
</form>

@section scripts {
<script>
    $('#toggleSelectedWmsLayers').click(function (event) {
        event.preventDefault();
        $('input[name="selectedLayers"]').each(function () {
            if ($(this).prop('checked')) {
                $(this).prop('checked',false);
            } else {
                $(this).prop('checked', true);
            }
            
        });
    })
    $('#toggleWmsLayerDetails').click(function (event) {
        event.preventDefault();
        $('div.wms-layer > div.panel-body').toggle();
        $('div.wms-layer > div.panel-heading span.layer-name').toggle();
    });
</script>
}